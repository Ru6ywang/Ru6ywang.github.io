<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword" content="Ruby">
    <meta name="theme-color" content="#600090">
    <meta name="msapplication-navbutton-color" content="#600090">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090">
    <link rel="shortcut icon" href="https://ruby-1307023850.cos.ap-chengdu.myqcloud.com/favicon.png">
    <link rel="alternate" type="application/atom+xml" title="Ruby" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.css">
    <title>
        
        dubbo面试｜Ruby&#39;s blog
        
    </title>

    <link rel="canonical" href="https://Ru6ywang.github.io/2022/11/03/dubbo面试/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/blog-style.css">


    <!-- Pygments Github CSS -->
    
<link rel="stylesheet" href="/css/syntax.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<style>

    header.intro-header {
        background-image: url('https://ruby-1307023850.cos.ap-chengdu.myqcloud.com/avatar.JPG')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top " id="nav-top" data-ispost = "true" data-istags="false
" data-ishome = "false" >
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand animated pulse" href="/">
                <span class="brand-logo">
                    Ruby
                </span>
                's Blog
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <!-- /.navbar-collapse -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
					
                    
                        
							
                        <li>
                            <a href="/about/">ABOUT</a>
                        </li>
							
						
                    
                        
							
                        <li>
                            <a href="/tags/">TAGS</a>
                        </li>
							
						
                    
					
					
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
//    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>

<!-- Main Content -->

<!--only post-->


<img class="wechat-title-img"
     src="https://ruby-1307023850.cos.ap-chengdu.myqcloud.com/cover01.jpg">


<style>
    
    header.intro-header {
        background-image: url('https://ruby-1307023850.cos.ap-chengdu.myqcloud.com/cover01.jpg')
    }

    
</style>

<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <div class="post-heading">
                    <h1>dubbo面试</h1>
                    
                    <span class="meta">
                         作者 Ruby Wang
                        <span>
                          日期 2022-11-03
                         </span>
                    </span>
                    <div class="tags text-center">
                        
                        <a class="tag" href="/tags/#Java"
                           title="Java">Java</a>
                        
                        <a class="tag" href="/tags/#dubbo"
                           title="dubbo">dubbo</a>
                        
                        <br/><span id="busuanzi_container_page_pv" style="display:none;">阅读量：
<span id="busuanzi_value_page_pv"></span>次</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="post-title-haojen">
        <span>
            dubbo面试
        </span>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Container -->
            <div class="col-lg-8 col-lg-offset-1 col-sm-9 post-container">
                <h2 id="1-Dubbo-支持哪些协议，每种协议的应用场景，优缺点？"><a href="#1-Dubbo-支持哪些协议，每种协议的应用场景，优缺点？" class="headerlink" title="1.Dubbo 支持哪些协议，每种协议的应用场景，优缺点？"></a><strong>1.Dubbo 支持哪些协议，每种协议的应用场景，优缺点？</strong></h2><p>（1）dubbo： 单一长连接和 NIO 异步通讯，适合大并发小数据量的服务调用，以及消费者远大于提供者。传输协议 TCP，异步，Hessian 序列化；</p>
<p>（2）rmi： 采用 JDK 标准的 rmi 协议实现，传输参数和返回参数对象需要实现Serializable 接口，使用 java 标准序列化机制，使用阻塞式短连接，传输数包大小混合，消费者和提供者个数差不多，可传文件，传输协议 TCP。多个短连接，TCP 协议传输，同步传输，适用常规的远程服务调用和 rmi 互操作。在依赖低版本的 Common-Collections 包，java 序列化存在安全漏洞；</p>
<p>（3）webservice： 基于 WebService 的远程调用协议，集成 CXF 实现，提供和原生 WebService 的互操作。多个短连接，基于 HTTP 传输，同步传输，适用系统集成和跨语言调用；</p>
<p>（4）http： 基于 Http 表单提交的远程调用协议，使用 Spring 的 HttpInvoke 实现。多个短连接，传输协议 HTTP，传入参数大小混合，提供者个数多于消费者，需要给应用程序和浏览器 JS 调用；</p>
<p>（5）hessian： 集成 Hessian 服务，基于 HTTP 通讯，采用 Servlet 暴露服务，Dubbo 内嵌 Jetty 作为服务器时默认实现，提供与 Hession 服务互操作。多个短连接，同步 HTTP 传输，Hessian 序列化，传入参数较大，提供者大于消费者，提供者压力较大，可传文件；</p>
<blockquote>
<p>memcache： 基于 memcached 实现的 RPC 协议</p>
<p>redis： 基于 redis 实现的 RPC 协议</p>
</blockquote>
<h2 id="2-Dubbo-超时时间怎样设置？"><a href="#2-Dubbo-超时时间怎样设置？" class="headerlink" title="2.Dubbo 超时时间怎样设置？"></a><strong>2.Dubbo 超时时间怎样设置？</strong></h2><blockquote>
<p>Dubbo 超时时间设置有两种方式：</p>
</blockquote>
<p>（1）服务提供者端设置超时时间，在 Dubbo 的用户文档中，推荐如果能在服务 端多配置就尽量多配置，因为服务提供者比消费者更清楚自己提供的服务特 性。</p>
<p>（2）服务消费者端设置超时时间，如果在消费者端设置了超时时间，以消费者端 为主，即优先级更高。因为服务调用方设置超时时间控制性更灵活。如果消 费方超时，服务端线程不会定制，会产生警告。</p>
<h2 id="3-Dubbo-有些哪些注册中心？"><a href="#3-Dubbo-有些哪些注册中心？" class="headerlink" title="3.Dubbo 有些哪些注册中心？"></a><strong>3.Dubbo 有些哪些注册中心？</strong></h2><p>（1） Multicast 注册中心： Multicast 注册中心不需要任何中心节点，只要广播地 址，就能进行服务注册和发现。基于网络中组播传输实现；</p>
<p>（2）Zookeeper 注册中心： 基于分布式协调系统 Zookeeper 实现，采用Zookeeper 的 watch 机制实现数据变更；</p>
<p>（3）redis 注册中心： 基于 redis 实现，采用 key/Map 存储，住 key 存储服务名 和类型，Map 中 key 存储服务 URL，value 服务过期时间。基于 redis 的发布/订阅模式通知数据变更；</p>
<p>（4）Simple 注册中心</p>
<h2 id="3-Dubbo-集群的负载均衡有哪些策略"><a href="#3-Dubbo-集群的负载均衡有哪些策略" class="headerlink" title="3.Dubbo 集群的负载均衡有哪些策略"></a><strong>3.Dubbo 集群的负载均衡有哪些策略</strong></h2><blockquote>
<p>Dubbo 提供了常见的集群策略实现，并预扩展点予以自行实现。</p>
</blockquote>
<p>（1）Random LoadBalance: 随机选取提供者策略，有利于动态调整提供者权 重。截面碰撞率高，调用次数越多，分布越均匀；</p>
<p>（2）RoundRobin LoadBalance: 轮循选取提供者策略，平均分布，但是存在请 求累积的问题；</p>
<p>（3） LeastActive LoadBalance: 最少活跃调用策略，解决慢提供者接收更少的 请求； （4） ConstantHash LoadBalance: 一致性 Hash 策略，使相同参数请求总是发 到同一提供者，一台机器宕机，可以基于虚拟节点，分摊至其他提供者，避 免引起提供者的剧烈变动；</p>
<h2 id="4-Dubbo-是什么？"><a href="#4-Dubbo-是什么？" class="headerlink" title="4.Dubbo 是什么？"></a><strong>4.Dubbo 是什么？</strong></h2><blockquote>
<p>Dubbo 是一个分布式、高性能、透明化的 RPC 服务框架，提供服务自动注册、自动发现等高效服务治理方案， 可以和Spring 框架无缝集成。</p>
</blockquote>
<h2 id="5-Dubbo-的主要应用场景？"><a href="#5-Dubbo-的主要应用场景？" class="headerlink" title="5.Dubbo 的主要应用场景？"></a><strong>5.Dubbo 的主要应用场景？</strong></h2><p>(1)透明化的远程方法调用，就像调用本地方法一样调用远程方法，只需简单配置，没有任何 API 侵入。</p>
<p>(2)软负载均衡及容错机制，可在内网替代 F5 等硬件负载均衡器，降低成本，减少单点。</p>
<p>(3)服务自动注册与发现，不再需要写死服务提供方地址，注册中心基于接口名查询服务提供者的 IP 地址，并且能够平滑添加或删除服务提供者。</p>
<h2 id="6-Dubbo-的核心功能？"><a href="#6-Dubbo-的核心功能？" class="headerlink" title="6.Dubbo 的核心功能？"></a><strong>6.Dubbo 的核心功能？</strong></h2><blockquote>
<p>主要就是如下 3 个核心功能：</p>
</blockquote>
<p>(1) Remoting：网络通信框架，提供对多种 NIO 框架抽象封装，包括“同步转异步”和“请求-响应”模式的信息交换方式。</p>
<p>(2) Cluster：服务框架，提供基于接口方法的透明远程过程调用，包括多协议支持，以及软负载均衡，失败容错，地址路由，动态配置等集群支持。</p>
<p>(3)Registry：服务注册，基于注册中心目录服务，使服务消费方能动态的查找服务提供方，使地址透明，使服务提供方可以平滑增加或减少机器。</p>
<h2 id="7-Dubbo-的核心组件？"><a href="#7-Dubbo-的核心组件？" class="headerlink" title="7.Dubbo 的核心组件？"></a><strong>7.Dubbo 的核心组件？</strong></h2><blockquote>
<p>Dubbo 服务注册与发现的流程？</p>
</blockquote>
<p><img src="https://pic2.zhimg.com/80/v2-68caa321acb25b3503a4e6a49abe75d5_720w.webp" alt="img"></p>
<blockquote>
<p>流程说明：</p>
</blockquote>
<p>(1)Provider(提供者)绑定指定端口并启动服务</p>
<p>(2)指供者连接注册中心，并发本机 IP、端口、应用信息和提供服务信息发送至注册中心存储</p>
<p>(3) Consumer(消费者），连接注册中心 ，并发送应用信息、所求服务信息至注册中心</p>
<p>(4)注册中心根据 消费 者所求服务信息匹配对应的提供者列表发送至Consumer 应用缓存。</p>
<p>(5) Consumer 在发起远程调用时基于缓存的消费者列表择其一发起调用。</p>
<p>(6) Provider 状态变更会实时通知注册中心、在由注册中心实时推送至Consumer设计的原因：</p>
<blockquote>
<p>Consumer 与 Provider 解偶，双方都可以横向增减节点数。 注册中心对本身可做对等集群，可动态增减节点，并且任意一台宕掉后，将自动切换到另一台</p>
</blockquote>
<p>(7) 去中心化，双方不直接依懒注册中心，即使注册中心全部宕机短时间 内也不会影响服务的调用</p>
<p>(8)服务提供者无状态，任意一台宕掉后，不影响使用</p>
<h2 id="8-Dubbo-的架构设计？"><a href="#8-Dubbo-的架构设计？" class="headerlink" title="8.Dubbo 的架构设计？"></a><strong>8.Dubbo 的架构设计？</strong></h2><p><img src="https://pic1.zhimg.com/80/v2-fc712df4b56062c05846aa83b5a69338_720w.webp" alt="img"></p>
<blockquote>
<p>Dubbo 框架设计一共划分了 10 个层： (1)服务接口层（Service）：该层是与实际业务逻辑相关的，根据服务提供方和服务消费方的业务设计对应的接口和实现。</p>
</blockquote>
<p>(2)配置层（Config）：对外配置接口，以 ServiceConfig 和ReferenceConfig 为中心。</p>
<p>(3)服务代理层（Proxy）：服务接口透明代理，生成服务的客户端 Stub和服务器端 Skeleton。</p>
<p>(4)服务注册层（Registry）：封装服务地址的注册与发现，以服务 URL为中心。</p>
<p>(5)集群层（Cluster）：封装多个提供者的路由及负载均衡，并桥接注册中心，以 Invoker 为中心。 (6)监控层（Monitor）：RPC 调用次数和调用时间监控。</p>
<p>(7)远程调用层（Protocol）：封将 RPC 调用，以 Invocation 和 Result 为中心，扩展接口为 Protocol、Invoker 和 Exporter。 (8)信息交换层（Exchange）：封装请求响应模式，同步转异步，以 Request 和 Response 为中心。 (9)网络传输层（Transport）：抽象 mina 和 netty 为统一接口，以 Message 为中心。</p>
<h2 id="9-dubbo-推荐用什么协议？"><a href="#9-dubbo-推荐用什么协议？" class="headerlink" title="9.dubbo 推荐用什么协议？"></a><strong>9.dubbo 推荐用什么协议？</strong></h2><blockquote>
<p>默认使用 dubbo 协议</p>
</blockquote>
<h2 id="10-Dubbo-默认采用注册中心？"><a href="#10-Dubbo-默认采用注册中心？" class="headerlink" title="10.Dubbo 默认采用注册中心？"></a><strong>10.Dubbo 默认采用注册中心？</strong></h2><blockquote>
<p>采用 Zookeeper</p>
</blockquote>
<h2 id="11-为什么需要服务治理？"><a href="#11-为什么需要服务治理？" class="headerlink" title="11.为什么需要服务治理？"></a><strong>11.为什么需要服务治理？</strong></h2><p>(1)过多的服务 URL 配置困难 (2)负载均衡分配节点压力过大的情况下也需要部署集群 (3)服务依赖混乱，启动顺序不清晰 (4)过多服务导致性能指标分析难度较大，需要监控</p>
<h2 id="12-Dubbo-的注册中心集群挂掉，发布者和订阅者之间还能通信么？"><a href="#12-Dubbo-的注册中心集群挂掉，发布者和订阅者之间还能通信么？" class="headerlink" title="12.Dubbo 的注册中心集群挂掉，发布者和订阅者之间还能通信么？"></a><strong>12.Dubbo 的注册中心集群挂掉，发布者和订阅者之间还能通信么？</strong></h2><blockquote>
<p>可以的，启动 dubbo 时，消费者会从 zookeeper 拉取注册的生产者的地址接口等数据，缓存在本地。每次调用时，按照本地存储的地址进行调用。</p>
</blockquote>
<h2 id="13-Dubbo-与-Spring-的关系？"><a href="#13-Dubbo-与-Spring-的关系？" class="headerlink" title="13.Dubbo 与 Spring 的关系？"></a><strong>13.Dubbo 与 Spring 的关系？</strong></h2><blockquote>
<p>Dubbo 采用全 Spring 配置方式，透明化接入应用，对应用没有任何API 侵入，只需用 Spring 加载 Dubbo 的配置即可，Dubbo 基于Spring 的 Schema 扩展进行加载。</p>
</blockquote>
<h2 id="14-Dubbo-使用的是什么通信框架"><a href="#14-Dubbo-使用的是什么通信框架" class="headerlink" title="14.Dubbo 使用的是什么通信框架?"></a><strong>14.Dubbo 使用的是什么通信框架?</strong></h2><blockquote>
<p>默认使用 NIO Netty 框架</p>
</blockquote>
<h2 id="15-Dubbo-集群提供了哪些负载均衡策略？"><a href="#15-Dubbo-集群提供了哪些负载均衡策略？" class="headerlink" title="15.Dubbo 集群提供了哪些负载均衡策略？"></a><strong>15.Dubbo 集群提供了哪些负载均衡策略？</strong></h2><p>(1)Random LoadBalance: 随机选取提供者策略，有利于动态调整提供者权重。截面碰撞率高，调用次数越多，分布越均匀；</p>
<p>(2)RoundRobin LoadBalance: 轮循选取提供者策略，平均分布，但是存在请求累积的问题；</p>
<p>(3)LeastActive LoadBalance: 最少活跃调用策略，解决慢提供者接收更少的请求；</p>
<p>(4)ConstantHash LoadBalance: 一致性 Hash 策略，使相同参数请求总是发到同一提供者，一台机器宕机，可以基于虚拟节点，分摊至其他提供者，避免引起提供者的剧烈变动；缺省时为 Random 随机调用</p>
<h2 id="16-Dubbo-的集群容错方案有哪些？"><a href="#16-Dubbo-的集群容错方案有哪些？" class="headerlink" title="16.Dubbo 的集群容错方案有哪些？"></a><strong>16.Dubbo 的集群容错方案有哪些？</strong></h2><p>(1)Failover Cluster:失败自动切换，当出现失败，重试其它服务器。通常用于读操作，但 重试会带来更长延迟。</p>
<p>(2)Failfast Cluster:快速失败，只发起一次调用，失败立即报错。通常用于非幂等性的写 操作，比如新增记录。</p>
<p>(3)Failsafe Cluster:失败安全，出现异常时，直接忽略。通常用于写入审计日志等操作。</p>
<p>(4)Failback Cluster:失败自动恢复，后台记录失败请求，定时重发。通常用于消息通知操 作。</p>
<p>(5)Forking Cluster:并行调用多个服务器，只要一个成功即返回。通常用于实时性要求较 高的读操作，但需要浪费更多服务资源。可通过 forks=”2” 来设置最大并行数。</p>
<p>(6)Broadcast Cluster:广播调用所有提供者，逐个调用，任意一台报错则报错 。通常用于通 知所有提供者更新缓存或日志等本地资源信息。</p>
<h2 id="17-Dubbo-的默认集群容错方案？"><a href="#17-Dubbo-的默认集群容错方案？" class="headerlink" title="17.Dubbo 的默认集群容错方案？"></a><strong>17.Dubbo 的默认集群容错方案？</strong></h2><blockquote>
<p>Failover Cluster</p>
</blockquote>
<h2 id="18-Dubbo-支持哪些序列化方式？"><a href="#18-Dubbo-支持哪些序列化方式？" class="headerlink" title="18.Dubbo 支持哪些序列化方式？"></a><strong>18.Dubbo 支持哪些序列化方式？</strong></h2><blockquote>
<p>默认使用 Hessian 序列化，还有 Duddo、FastJson、Java 自带序列 化。</p>
</blockquote>
<h2 id="19-服务调用超时问题怎么解决？"><a href="#19-服务调用超时问题怎么解决？" class="headerlink" title="19.服务调用超时问题怎么解决？"></a><strong>19.服务调用超时问题怎么解决？</strong></h2><blockquote>
<p>dubbo 在调用服务不成功时，默认是会重试两次的。</p>
</blockquote>
<h2 id="20-Dubbo-在安全机制方面是如何解决？"><a href="#20-Dubbo-在安全机制方面是如何解决？" class="headerlink" title="20.Dubbo 在安全机制方面是如何解决？"></a><strong>20.Dubbo 在安全机制方面是如何解决？</strong></h2><blockquote>
<p>Dubbo 通过 Token 令牌防止用户绕过注册中心直连，然后在注册中心上管理授权。Dubbo 还提供服务黑白名单，来控制服务所允许的调用方。</p>
</blockquote>
<h2 id="21-Dubbo-和-Dubbox-之间的区别？"><a href="#21-Dubbo-和-Dubbox-之间的区别？" class="headerlink" title="21.Dubbo 和 Dubbox 之间的区别？"></a><strong>21.Dubbo 和 Dubbox 之间的区别？</strong></h2><blockquote>
<p>dubbox 基于 dubbo 上做了一些扩展，如加了服务可 restful 调 用，更新了开源组件等。</p>
</blockquote>
<h2 id="22-Dubbo-和-Spring-Cloud-的关系？"><a href="#22-Dubbo-和-Spring-Cloud-的关系？" class="headerlink" title="22.Dubbo 和 Spring Cloud 的关系？"></a><strong>22.Dubbo 和 Spring Cloud 的关系？</strong></h2><blockquote>
<p>Dubbo 是 SOA 时代的产物，它的关注点主要在于服务的调用，流 量分发、流量监控和熔断。</p>
<p>而 Spring Cloud 诞生于微服务架构时 代，考虑的是微服务治理的方方面面，另外由于依托了 Spirng、Spirng Boot 的优势之上，两个框架在开始目标就不一致，Dubbo定位服务治理、Spirng Cloud 是一个生态。</p>
</blockquote>
<p>Dubbo 和 Spring Cloud 的区别？</p>
<blockquote>
<p>最大的区别：Dubbo 底层是使用 Netty 这样的 NIO 框架，是基于TCP 协议传输的，配合以 Hession 序列化完成 RPC 通信。</p>
<p>而 SpringCloud 是基于 Http 协议+Rest 接口调用远程过程的通信，相对来说，Http 请求会有更大的报文，占的带宽也会更多。但是REST 相比 RPC 更为灵活，服务提供方和调用方的依赖只依靠一纸契约，不存在代码级别的强依赖。</p>
</blockquote>
<h2 id="23-Dubbo-中-zookeeper-做注册中心，如果注册中心集群都挂掉，发布者和订阅者之间还能通信么？"><a href="#23-Dubbo-中-zookeeper-做注册中心，如果注册中心集群都挂掉，发布者和订阅者之间还能通信么？" class="headerlink" title="23.Dubbo 中 zookeeper 做注册中心，如果注册中心集群都挂掉，发布者和订阅者之间还能通信么？"></a><strong>23.Dubbo 中 zookeeper 做注册中心，如果注册中心集群都挂掉，发布者和订阅者之间还能通信么？</strong></h2><blockquote>
<p>可以通信的，启动 dubbo 时，消费者会从 zk 拉取注册的生产者的地址接口等数据，缓存在本地。每次调用时，按照本地存储的地址进行调用；注册中心对等集群，任意一台宕机后，将会切换到另一台； 注册中心全部宕机后，服务的提供者和消费者仍能通过本地缓存通讯。服务提供者无状态，任一台 宕机后，不影响使用；服务提供者全部宕机，服务消费者会无法使用，并无限次重连等待服务者恢复；挂掉是不要紧的，但前提是你没有增加新的服务，如果你要调用新的服务，则是不能办到的。</p>
</blockquote>
<h2 id="24-dubbo-通信协议-dubbo-协议为什么要消费者比提供者个数多"><a href="#24-dubbo-通信协议-dubbo-协议为什么要消费者比提供者个数多" class="headerlink" title="24.dubbo 通信协议 dubbo 协议为什么要消费者比提供者个数多"></a><strong>24.dubbo 通信协议 dubbo 协议为什么要消费者比提供者个数多</strong></h2><blockquote>
<p>因 dubbo 协议采用单一长连接，假设网络为千兆网卡(1024Mbit=128MByte)， 根据测试经验数据每条连接最多只能压满 7MByte(不同的环境可能不一样，供参考)，理论上 1 个服务提供者需要 20 个服务消费者才能压满网卡</p>
</blockquote>
<h2 id="25-dubbo-通信协议-dubbo-协议为什么不能传大包"><a href="#25-dubbo-通信协议-dubbo-协议为什么不能传大包" class="headerlink" title="25.dubbo 通信协议 dubbo 协议为什么不能传大包"></a><strong>25.dubbo 通信协议 dubbo 协议为什么不能传大包</strong></h2><blockquote>
<p>因 dubbo 协议采用单一长连接， 如果每次请求的数据包大小为 500KByte，假设网络为千兆网卡(1024Mbit=128MByte)，每条连接最大 7MByte(不同的 环境可能不一样，供参考)， 单个服务提供者的 TPS(每秒处理事务数)最大为：128MByte / 500KByte = 262。 单个消费者调用单个服务提供者的 TPS(每秒处理事务数)最大为：7MByte / 500KByte = 14。 如果能接受，可以考虑使用，否则网络将成为瓶颈。</p>
</blockquote>
<h2 id="26-dubbo-通信协议-dubbo-协议为什么采用异步单一长连接"><a href="#26-dubbo-通信协议-dubbo-协议为什么采用异步单一长连接" class="headerlink" title="26.dubbo 通信协议 dubbo 协议为什么采用异步单一长连接"></a><strong>26.dubbo 通信协议 dubbo 协议为什么采用异步单一长连接</strong></h2><blockquote>
<p>因为服务的现状大都是服务提供者少，通常只有几台机器， 而服务的消费者多，可能整个网站都在访问该服务， 比如 Morgan 的提供者只有 6 台提供者，却有上百台消费者，每天有 1.5 亿次调用， 如果采用常规的 hessian 服务，服务提供者很容易就被压跨， 通过单一连接，保证单一消费者不会压死提供者， 长连接，减少连接握手验证等， 并使用异步 IO，复用线程池，防止 C10K 问题</p>
</blockquote>

                <hr>
                

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2022/11/04/创建型模式-工厂-原型-建造者-创建者/" data-toggle="tooltip" data-placement="top"
                           title="创建型模式-工厂|原型|建造者|创建者">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2022/05/20/ConcurrentHashMap/" data-toggle="tooltip" data-placement="top"
                           title="ConcurrentHashMap">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                

                


                <!--加入新的评论系统-->
                
                <!-- 来必力City版安装代码 -->
                <div id="lv-container" data-id="city" data-uid="MTAyMC81NjQ5NC8zMjk1Nw">
                    <script type="text/javascript">
                        (function(d, s) {
                            var j, e = d.getElementsByTagName(s)[0];

                            if (typeof LivereTower === 'function') { return; }

                            j = d.createElement(s);
                            j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                            j.async = true;

                            e.parentNode.insertBefore(j, e);
                        })(document, 'script');
                    </script>
                    <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
                </div>
                <!-- City版安装代码已完成 -->
                

                

            </div>

            <div class="hidden-xs col-sm-3 toc-col">
                <div class="toc-wrap">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Dubbo-%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E5%8D%8F%E8%AE%AE%EF%BC%8C%E6%AF%8F%E7%A7%8D%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9F"><span class="toc-text">1.Dubbo 支持哪些协议，每种协议的应用场景，优缺点？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Dubbo-%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%E6%80%8E%E6%A0%B7%E8%AE%BE%E7%BD%AE%EF%BC%9F"><span class="toc-text">2.Dubbo 超时时间怎样设置？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Dubbo-%E6%9C%89%E4%BA%9B%E5%93%AA%E4%BA%9B%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%EF%BC%9F"><span class="toc-text">3.Dubbo 有些哪些注册中心？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Dubbo-%E9%9B%86%E7%BE%A4%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E6%9C%89%E5%93%AA%E4%BA%9B%E7%AD%96%E7%95%A5"><span class="toc-text">3.Dubbo 集群的负载均衡有哪些策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Dubbo-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">4.Dubbo 是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Dubbo-%E7%9A%84%E4%B8%BB%E8%A6%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9F"><span class="toc-text">5.Dubbo 的主要应用场景？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Dubbo-%E7%9A%84%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%EF%BC%9F"><span class="toc-text">6.Dubbo 的核心功能？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Dubbo-%E7%9A%84%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%EF%BC%9F"><span class="toc-text">7.Dubbo 的核心组件？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-Dubbo-%E7%9A%84%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%9F"><span class="toc-text">8.Dubbo 的架构设计？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-dubbo-%E6%8E%A8%E8%8D%90%E7%94%A8%E4%BB%80%E4%B9%88%E5%8D%8F%E8%AE%AE%EF%BC%9F"><span class="toc-text">9.dubbo 推荐用什么协议？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-Dubbo-%E9%BB%98%E8%AE%A4%E9%87%87%E7%94%A8%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%EF%BC%9F"><span class="toc-text">10.Dubbo 默认采用注册中心？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%EF%BC%9F"><span class="toc-text">11.为什么需要服务治理？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-Dubbo-%E7%9A%84%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E9%9B%86%E7%BE%A4%E6%8C%82%E6%8E%89%EF%BC%8C%E5%8F%91%E5%B8%83%E8%80%85%E5%92%8C%E8%AE%A2%E9%98%85%E8%80%85%E4%B9%8B%E9%97%B4%E8%BF%98%E8%83%BD%E9%80%9A%E4%BF%A1%E4%B9%88%EF%BC%9F"><span class="toc-text">12.Dubbo 的注册中心集群挂掉，发布者和订阅者之间还能通信么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-Dubbo-%E4%B8%8E-Spring-%E7%9A%84%E5%85%B3%E7%B3%BB%EF%BC%9F"><span class="toc-text">13.Dubbo 与 Spring 的关系？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-Dubbo-%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88%E9%80%9A%E4%BF%A1%E6%A1%86%E6%9E%B6"><span class="toc-text">14.Dubbo 使用的是什么通信框架?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-Dubbo-%E9%9B%86%E7%BE%A4%E6%8F%90%E4%BE%9B%E4%BA%86%E5%93%AA%E4%BA%9B%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5%EF%BC%9F"><span class="toc-text">15.Dubbo 集群提供了哪些负载均衡策略？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-Dubbo-%E7%9A%84%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99%E6%96%B9%E6%A1%88%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-text">16.Dubbo 的集群容错方案有哪些？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-Dubbo-%E7%9A%84%E9%BB%98%E8%AE%A4%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99%E6%96%B9%E6%A1%88%EF%BC%9F"><span class="toc-text">17.Dubbo 的默认集群容错方案？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-Dubbo-%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E5%BA%8F%E5%88%97%E5%8C%96%E6%96%B9%E5%BC%8F%EF%BC%9F"><span class="toc-text">18.Dubbo 支持哪些序列化方式？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%E8%B6%85%E6%97%B6%E9%97%AE%E9%A2%98%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%EF%BC%9F"><span class="toc-text">19.服务调用超时问题怎么解决？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-Dubbo-%E5%9C%A8%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6%E6%96%B9%E9%9D%A2%E6%98%AF%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%EF%BC%9F"><span class="toc-text">20.Dubbo 在安全机制方面是如何解决？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-Dubbo-%E5%92%8C-Dubbox-%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-text">21.Dubbo 和 Dubbox 之间的区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-Dubbo-%E5%92%8C-Spring-Cloud-%E7%9A%84%E5%85%B3%E7%B3%BB%EF%BC%9F"><span class="toc-text">22.Dubbo 和 Spring Cloud 的关系？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-Dubbo-%E4%B8%AD-zookeeper-%E5%81%9A%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E9%9B%86%E7%BE%A4%E9%83%BD%E6%8C%82%E6%8E%89%EF%BC%8C%E5%8F%91%E5%B8%83%E8%80%85%E5%92%8C%E8%AE%A2%E9%98%85%E8%80%85%E4%B9%8B%E9%97%B4%E8%BF%98%E8%83%BD%E9%80%9A%E4%BF%A1%E4%B9%88%EF%BC%9F"><span class="toc-text">23.Dubbo 中 zookeeper 做注册中心，如果注册中心集群都挂掉，发布者和订阅者之间还能通信么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-dubbo-%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE-dubbo-%E5%8D%8F%E8%AE%AE%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%B6%88%E8%B4%B9%E8%80%85%E6%AF%94%E6%8F%90%E4%BE%9B%E8%80%85%E4%B8%AA%E6%95%B0%E5%A4%9A"><span class="toc-text">24.dubbo 通信协议 dubbo 协议为什么要消费者比提供者个数多</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-dubbo-%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE-dubbo-%E5%8D%8F%E8%AE%AE%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%83%BD%E4%BC%A0%E5%A4%A7%E5%8C%85"><span class="toc-text">25.dubbo 通信协议 dubbo 协议为什么不能传大包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-dubbo-%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE-dubbo-%E5%8D%8F%E8%AE%AE%E4%B8%BA%E4%BB%80%E4%B9%88%E9%87%87%E7%94%A8%E5%BC%82%E6%AD%A5%E5%8D%95%E4%B8%80%E9%95%BF%E8%BF%9E%E6%8E%A5"><span class="toc-text">26.dubbo 通信协议 dubbo 协议为什么采用异步单一长连接</span></a></li></ol>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                

                <!-- Friends Blog -->
                
            </div>
        </div>

    </div>
</article>







<!-- Footer -->
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <br>
                <ul class="list-inline text-center">
                
                
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/桐原ah">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/Ru6ywang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Ruby 2022
                    <br>
                    <span id="busuanzi_container_site_pv" style="font-size: 12px;">PV: <span id="busuanzi_value_site_pv"></span> Times</span>
                    <br>
                    Theme by <a target="_blank" rel="noopener" href="https://haojen.github.io/">Haojen Ma</a>
                </p>

            </div>
        </div>
    </div>
    

</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/blog.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://Ru6ywang.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>



<!-- Google Analytics -->



<!-- Baidu Tongji -->


<!-- swiftype -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','','2.0.0');
</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!--wechat title img-->
<img class="wechat-title-img" src="https://ruby-1307023850.cos.ap-chengdu.myqcloud.com/avatar.JPG">
</body>

</html>
