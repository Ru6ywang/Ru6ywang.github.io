<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword" content="Ruby">
    <meta name="theme-color" content="#600090">
    <meta name="msapplication-navbutton-color" content="#600090">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090">
    <link rel="shortcut icon" href="https://ruby-1307023850.cos.ap-chengdu.myqcloud.com/favicon.png">
    <link rel="alternate" type="application/atom+xml" title="Ruby" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.css">
    <title>
        
        didi面试｜Ruby&#39;s blog
        
    </title>

    <link rel="canonical" href="https://Ru6ywang.github.io/2022/11/03/didi面试/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/blog-style.css">


    <!-- Pygments Github CSS -->
    
<link rel="stylesheet" href="/css/syntax.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<style>

    header.intro-header {
        background-image: url('https://ruby-1307023850.cos.ap-chengdu.myqcloud.com/avatar.JPG')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top " id="nav-top" data-ispost = "true" data-istags="false
" data-ishome = "false" >
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand animated pulse" href="/">
                <span class="brand-logo">
                    Ruby
                </span>
                's Blog
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <!-- /.navbar-collapse -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
					
                    
                        
							
                        <li>
                            <a href="/about/">ABOUT</a>
                        </li>
							
						
                    
                        
							
                        <li>
                            <a href="/tags/">TAGS</a>
                        </li>
							
						
                    
					
					
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
//    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>

<!-- Main Content -->

<!--only post-->


<img class="wechat-title-img"
     src="https://ruby-1307023850.cos.ap-chengdu.myqcloud.com/cover01.jpg">


<style>
    
    header.intro-header {
        background-image: url('https://ruby-1307023850.cos.ap-chengdu.myqcloud.com/cover01.jpg')
    }

    
</style>

<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <div class="post-heading">
                    <h1>didi面试</h1>
                    
                    <span class="meta">
                         作者 Ruby Wang
                        <span>
                          日期 2022-11-03
                         </span>
                    </span>
                    <div class="tags text-center">
                        
                        <a class="tag" href="/tags/#Java"
                           title="Java">Java</a>
                        
                        <a class="tag" href="/tags/#didi"
                           title="didi">didi</a>
                        
                        <br/><span id="busuanzi_container_page_pv" style="display:none;">阅读量：
<span id="busuanzi_value_page_pv"></span>次</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="post-title-haojen">
        <span>
            didi面试
        </span>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Container -->
            <div class="col-lg-8 col-lg-offset-1 col-sm-9 post-container">
                <p>duboo面试题：<a target="_blank" rel="noopener" href="http://www.ruilangai.com/361.html">http://www.ruilangai.com/361.html</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/293731112">https://zhuanlan.zhihu.com/p/293731112</a></p>
<p>TCPc长连接短连接 <a target="_blank" rel="noopener" href="https://blog.csdn.net/HD243608836/article/details/117751174">https://blog.csdn.net/HD243608836/article/details/117751174</a></p>
<h5 id="1-说一下技术架构是什么。"><a href="#1-说一下技术架构是什么。" class="headerlink" title="1.说一下技术架构是什么。"></a>1.说一下技术架构是什么。</h5><p>安全SDK，主要为Android&amp;iOS app端提供设备环境和用户行为相关的数据采集和风险识别能力，同时提供报文签名、数据加解密等安全防护功能，目前已接入网约车、代驾、橙心优选、国际化等多条业务线，为业务风控策略提供数据支撑和安全防护能力。<br>ddmq做消息队列<br>dubbo服务<br>zookeeper 做注册中心<br>mongo做基础数据库<br>redis<br>通过mq落hive表</p>
<h5 id="2-牛盾网关是怎么路由的。"><a href="#2-牛盾网关是怎么路由的。" class="headerlink" title="2.牛盾网关是怎么路由的。"></a>2.牛盾网关是怎么路由的。</h5><p>公司nginx配置router，然后http请求，最后在dubbo在调用，注册中心直接拿</p>
<h5 id="3-dubbo直连和注入api，2种方式优劣。"><a href="#3-dubbo直连和注入api，2种方式优劣。" class="headerlink" title="3.dubbo直连和注入api，2种方式优劣。"></a>3.dubbo直连和注入api，2种方式优劣。</h5><h5 id="4-dubbo怎么感知服务不在。"><a href="#4-dubbo怎么感知服务不在。" class="headerlink" title="4.dubbo怎么感知服务不在。"></a>4.dubbo怎么感知服务不在。</h5><p>Zookeeper会通过心跳检测机制,剔除<br>心跳检测，发送ping命令，优化（在写空闲的时候才发送ping命令）<br>Zookeeper里面提供的Watch机制，Zookeeper Server就会发送一个事件通知Dubbo Client端</p>
<p>Zookeeper的watch机制</p>
<p>NodeCache 根</p>
<p>PathChildrenCache 子节点</p>
<p>TreeCache（监听和缓存根几点变化和子节点变化）（重点）</p>
<h5 id="5-dubbo-provider-和-zk-可以连接，-但是consumer和provider失败了，dubbo怎么处理的。"><a href="#5-dubbo-provider-和-zk-可以连接，-但是consumer和provider失败了，dubbo怎么处理的。" class="headerlink" title="5.dubbo provider 和 zk 可以连接， 但是consumer和provider失败了，dubbo怎么处理的。"></a>5.dubbo provider 和 zk 可以连接， 但是consumer和provider失败了，dubbo怎么处理的。</h5><p>1、连接超时，<br>    1）服务端确实处理比较慢，没有在指定时间返回<br>    2）服务端比较快，但客户端Load很高，负载压力很大的时候，会因为客户端请求发不出去，响应卡在TCP Buffer等问题，造成超时</p>
<pre><code>调整 Provider 端的 dubbo.provider.threads 参数的大小，调大一些即可。

调整 Consumer 端的 dubbo.consumer.actives 参数的大小，调小一些即可。

增加 Provider 服务的数量，分担压力。

GC也可能导致超时
</code></pre>
<h5 id="6-说一下mq在项目中的运用。"><a href="#6-说一下mq在项目中的运用。" class="headerlink" title="6.说一下mq在项目中的运用。"></a>6.说一下mq在项目中的运用。</h5><p>通过mq落hive表<br>异步削峰</p>
<h5 id="7-为什么要用mq推送底图而不用http。好处是什么。"><a href="#7-为什么要用mq推送底图而不用http。好处是什么。" class="headerlink" title="7.为什么要用mq推送底图而不用http。好处是什么。"></a>7.为什么要用mq推送底图而不用http。好处是什么。</h5><p>削峰，异步消费，解耦</p>
<h5 id="8-mq使用场景。"><a href="#8-mq使用场景。" class="headerlink" title="8.mq使用场景。"></a>8.mq使用场景。</h5><h5 id="9-kaflka怎么保证消息按顺序推送。"><a href="#9-kaflka怎么保证消息按顺序推送。" class="headerlink" title="9.kaflka怎么保证消息按顺序推送。"></a>9.kaflka怎么保证消息按顺序推送。</h5><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1839597">https://cloud.tencent.com/developer/article/1839597</a><br>全局有序<br>1个Topic只能对应1个Partition。<br>对应的consumer也要使用单线程或者保证消费顺序的线程模型<br>局部有序：一个Topic下的消息，只需要满足同一业务字段的要按照生产顺序消费。例如：Topic消息是订单的流水表，包含订单orderId，业务要求同一个orderId的消息需要按照生产顺序进行消费。<br>需要有序消费的，指定Partition Key，放入同一分区</p>
<p>消息重试对顺序消息的影响<br>严格的顺序消费还需要max.in.flight.requests.per.connection参数的支持。</p>
<h5 id="10-项目的稳定性建设参与了什么。"><a href="#10-项目的稳定性建设参与了什么。" class="headerlink" title="10.项目的稳定性建设参与了什么。"></a>10.项目的稳定性建设参与了什么。</h5><p>埋点，日志，告警</p>
<h5 id="11-说一下底图治理流程。"><a href="#11-说一下底图治理流程。" class="headerlink" title="11.说一下底图治理流程。"></a>11.说一下底图治理流程。</h5><h5 id="12-遇到FULL-GC了怎么排查，利用滴滴的生态。"><a href="#12-遇到FULL-GC了怎么排查，利用滴滴的生态。" class="headerlink" title="12.遇到FULL GC了怎么排查，利用滴滴的生态。"></a>12.遇到FULL GC了怎么排查，利用滴滴的生态。</h5><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1824276">https://cloud.tencent.com/developer/article/1824276</a></p>
<p>原因： 内存泄漏（代码有问题，对象引用没及时释放，导致对象不能及时回收） 死循环 大对象 程序执行了System.gc()</p>
<p>一般先用 <strong>jmap</strong>导出堆内存快照（**jmap -dump:format=b，file=文件名 [pid]**）</p>
<p>然后用 mat等工具分析出什么对象占用了大量空间，再查看相关引用找到问题代码。</p>
<p>-为了进一步排查原因，我们在线上开启了 <strong>-XX:+HeapDumpBeforeFullGC</strong>在其中一台机子上开启了 -XX:HeapDumpBeforeFullGC，</p>
<p>jstack [opiton] pid 关注 DeadLock 死锁 和Blocked 阻塞 </p>
<h5 id="13-有配置过jvm参数么，怎么配置的。"><a href="#13-有配置过jvm参数么，怎么配置的。" class="headerlink" title="13.有配置过jvm参数么，怎么配置的。"></a>13.有配置过jvm参数么，怎么配置的。</h5><p><code>-XX:NewRatio=4</code> 设置年轻代（包括Eden和两个Survivor区）与年老代的比值（除去持久代）。设置为4，则年轻代与年老代所占比值为1：4，年轻代占整个堆栈的1/5</p>
<p><code>-XX:SurvivorRatio=4</code> 设置年轻代中Eden区与Survivor区的大小比值。设置为4，则两个Survivor区与一个Eden区的比值为2:4，一个Survivor区占整个年轻代的1/6</p>
<p>-XX:MaxTenuringThreshold=0 设置垃圾最大年龄。如果设置为0的话，则年轻代对象不经过Survivor区，直接进入年老代。对于年老代比较多的应用，可以提高效率。如果将此值设置为一个较大值，则年轻代对象会在Survivor区进行多次复制，这样可以增加对象再年轻代的存活时间，增加在年轻代即被回收的概论。</p>
<p><code>-XX:+UseParallelGC</code> 选择垃圾收集器为并行收集器。此配置仅对年轻代有效。即上述配置下，年轻代使用并发收集，而年老代仍旧使用串行收集。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44588186/article/details/124680586">https://blog.csdn.net/weixin_44588186/article/details/124680586</a> jstack 堆栈命令</p>
<h5 id="14-遇到业务方调用你服务，你比之前慢了10倍，怎么排查，利用滴滴生态。"><a href="#14-遇到业务方调用你服务，你比之前慢了10倍，怎么排查，利用滴滴生态。" class="headerlink" title="14.遇到业务方调用你服务，你比之前慢了10倍，怎么排查，利用滴滴生态。"></a>14.遇到业务方调用你服务，你比之前慢了10倍，怎么排查，利用滴滴生态。</h5><p>odin 提供功能<br>日志排查 </p>
<h5 id="15-遇到什么bug了，怎么排查的。"><a href="#15-遇到什么bug了，怎么排查的。" class="headerlink" title="15.遇到什么bug了，怎么排查的。"></a>15.遇到什么bug了，怎么排查的。</h5><h5 id="16-国际化人脸的mongdb分片这些怎么做的。"><a href="#16-国际化人脸的mongdb分片这些怎么做的。" class="headerlink" title="16.国际化人脸的mongdb分片这些怎么做的。"></a>16.国际化人脸的mongdb分片这些怎么做的。</h5><p>分片集群由Shard、Mongos和Config server 3个组件构成：</p>
<p>Mongos是Sharded cluster的访问入口，把操作请求路由到正确的shard；<br>Config server存储了整个 分片群集的配置信息，其中包括 chunk信息；<br>Shard存储实际的数据，以chunk为单位存数据；<br><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/1e5f6e071d0d4fcc86d3cb7f0b35307e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWc5bqV,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center">https://img-blog.csdnimg.cn/1e5f6e071d0d4fcc86d3cb7f0b35307e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWc5bqV,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/MYDCJS/article/details/121480078">https://blog.csdn.net/MYDCJS/article/details/121480078</a><br>mongo分片<br>范围分片 设定一等范围，比如分数<br>hash分片 根据某一字段指定hash 分配</p>
<p>mysql分片<br>总体上来说，分片的选择是取决于最频繁的查询 SQL 的条件。找出每个表最频繁的 SQL，分析其查询条件，以及相互的关系，并结合 ER 图，就能比较准确的选择每个表的分片策略。</p>
<p><a target="_blank" rel="noopener" href="http://t.csdn.cn/lUny4">http://t.csdn.cn/lUny4</a></p>
<h5 id="常规八股："><a href="#常规八股：" class="headerlink" title="常规八股："></a>常规八股：</h5><ol>
<li>mysql 锁 表锁，行锁，<br>1InnoDB锁的特性</li>
</ol>
<p>在不通过索引条件查询的时候，InnoDB使用的确实是表锁（锁的是整张表）！<br>由于 MySQL 的行锁是针对索引加的锁,不是针对记录加的锁,所以虽然是访问不同行的记录,但是如果是使用相同的索引键,是会出现锁冲突的。<br>当表有多个索引的时候,不同的事务可以使用不同的索引锁定不同的行,另外,不论 是使用主键索引、唯一索引或普通索引,InnoDB都会使用行锁来对数据加锁。<br>即便在条件中使用了索引字段,但是否使用索引来检索数据是由 MySQL 通过判断不同 执行计划的代价来决定的,如果 MySQL 认为全表扫效率更高,比如对一些很小的表,它 就不会使用索引,这种情况下 InnoDB 将使用表锁,而不是行锁。因此,在分析锁冲突时, 别忘了检查SQL 的执行计划（explain查看）,以确认是否真正使用了索引。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_45861545/article/details/121825980">https://blog.csdn.net/m0_45861545/article/details/121825980</a></p>
<ol start="2">
<li><p>mysql 各个日志特征和联系</p>
</li>
<li><p>redis 持久化，国际化人脸是怎么配置持久化的。</p>
</li>
<li><p>nio优势，原理。<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/loveer/p/11479887.html">https://www.cnblogs.com/loveer/p/11479887.html</a><br>采用同步非阻塞，直接返回值，缺点，需要一只轮询 占用资源<br>面向缓冲区（Buffer）</p>
</li>
<li><p>JDBC使用流程。</p>
</li>
</ol>
<p>ZooKeeper是树形结构的注册中心，每个节点的类型分为持久节点、持久顺序节点、临时节点和临时顺序节点。</p>
<p>持久节点:服务注册后保证节点不会丢失，注册中心重启也会存在。<br>• 持久顺序节点:在持久节点特性的基础上增加了节点先后顺序的能力。<br>• 临时节点:服务注册后连接丢失或session超时，注册的节点会自动被移除。 • 临时顺序节点:在临时节点特性的基础上增加了节点先后顺序的能力。</p>
<p>2面</p>
<h5 id="1、线程池参数，创建和销毁过程"><a href="#1、线程池参数，创建和销毁过程" class="headerlink" title="1、线程池参数，创建和销毁过程"></a>1、线程池参数，创建和销毁过程</h5><p>最后都是由jvm回收<br><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/842806">https://developer.aliyun.com/article/842806</a><br>1、corePoolSize 核心线程数，即使有空闲的基本县城也会创建新的线程<br>2、maximumPoolSize 最大线程数，线程池允许创建的最大线程数。<br>3、workQueue 工作队列，用于保存等待执行的任务的阻塞队列。</p>
<p>ArrayBlockingQueue：基于数组结构的有界阻塞队列，按FIFO（先进先出）原则对任务进行排序。使用该队列，线程池中能创建的最大线程数为maximumPoolSize。<br>LinkedBlockingQueue：基于链表结构的无界阻塞队列，按FIFO（先进先出）原则对任务进行排序，吞吐量高于ArrayBlockingQueue。使用该队列，线程池中能创建的最大线程数为corePoolSize。静态工厂方法 Executor.newFixedThreadPool()使用了这个队列。<br>SynchronousQueue：一个不存储元素的阻塞队列。添加任务的操作必须等到另一个线程的移除操作，否则添加操作一直处于阻塞状态。静态工厂方法 Executor.newCachedThreadPool()使用了这个队列。<br>PriorityBlokingQueue：一个支持优先级的无界阻塞队列。使用该队列，线程池中能创建的最大线程数为corePoolSize。</p>
<p>4、keepAliveTime（线程活动保持时间）：线程池的工作线程空闲后，保持存活的时间<br>5、unit（线程活动保持时间的单位）：可选单位有DAYS、HOURS、MINUTES、毫秒、微秒、纳秒。<br>6、handler（饱和策略，或者又称拒绝策略）<br>AbortPolicy：无法处理新任务时，直接抛出异常，这是默认策略。<br>CallerRunsPolicy：用调用者所在的线程来执行任务。<br>DiscardOldestPolicy：丢弃阻塞队列中最靠前的一个任务，并执行当前任务。<br>DiscardPolicy：直接丢弃任务。</p>
<p>五种状态：running shutdown stop tidying terminated</p>
<h5 id="2、gc过程"><a href="#2、gc过程" class="headerlink" title="2、gc过程"></a>2、gc过程</h5><p><a target="_blank" rel="noopener" href="https://www.modb.pro/db/26526">https://www.modb.pro/db/26526</a></p>
<h5 id="3、linux-查看java进程-cpu"><a href="#3、linux-查看java进程-cpu" class="headerlink" title="3、linux 查看java进程 cpu"></a>3、linux 查看java进程 cpu</h5><p>top 看cpu占用情况<br>strace -p命令查看调用情况<br>jstack 看堆栈情况，定位代码行数<br>ps -aux | grep java</p>
<h5 id="4、awk"><a href="#4、awk" class="headerlink" title="4、awk"></a>4、awk</h5><h5 id="5、rpc"><a href="#5、rpc" class="headerlink" title="5、rpc"></a>5、rpc</h5><p>远程过程调用协议，<br>通过注册中心</p>
<h5 id="6、spring单例处理方式"><a href="#6、spring单例处理方式" class="headerlink" title="6、spring单例处理方式"></a>6、spring单例处理方式</h5><p>单例注册表，克服了单例类不能为继承的缺点，，当我们试图从Spring容器中取得某个类的实例时，默认情况下，Spring会才用单例模式进行创建。</p>
<h5 id="7、Kafka-分片设置"><a href="#7、Kafka-分片设置" class="headerlink" title="7、Kafka 分片设置"></a>7、Kafka 分片设置</h5><p>越多的分区会提高更多的吞吐量，也需要打开更多的句柄，会导致端对端的延迟，也需要消耗更多的内存，恢复期也会更长。<a target="_blank" rel="noopener" href="https://juejin.cn/post/6988344277654847501">https://juejin.cn/post/6988344277654847501</a></p>
<p>我们的kafka是零拷贝的。他大概的过程是磁盘上的数据，读到内存里面，内存里面的数据再通过socket发送到消费者<br>传统的过程：</p>
<h5 id="7、Kafka保证消息不丢失"><a href="#7、Kafka保证消息不丢失" class="headerlink" title="7、Kafka保证消息不丢失"></a>7、Kafka保证消息不丢失</h5><p>生产者：<br>1、设置acks，确保消息写入leader及follower后才返回。<br>2、如果链路不同，就像作者说的重试。<br>3、重试都不通，考虑持久化后进行批处理；如果是大量请求打不到kafka，生产者的机子要发通知给运维，运维也要对机子的网络进行监控。<br>Kafka:<br>1、确保数据及时同步到多副本：acks、replicas、factor的设置。<br>（注：数据复制（同步）必然有延迟的情况，acks的确认就意味着没写入副本的就当是没有，以防止只写入leader且leader宕机的情况）<br>消费者：<br>1、消费消息先持久化，消费完成再确认offset。<br>2、进行事务化的任务处理。</p>
<h5 id="8、redis数据结构"><a href="#8、redis数据结构" class="headerlink" title="8、redis数据结构"></a>8、redis数据结构</h5><p>string、list、hash、set、sorted set </p>
<h5 id="9、怎么用zset-有序树-实现一个场景，统计任意时间段的司机订单量"><a href="#9、怎么用zset-有序树-实现一个场景，统计任意时间段的司机订单量" class="headerlink" title="9、怎么用zset(有序树) 实现一个场景，统计任意时间段的司机订单量"></a>9、怎么用zset(有序树) 实现一个场景，统计任意时间段的司机订单量</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wuxiaolongah/article/details/121039759">https://blog.csdn.net/wuxiaolongah/article/details/121039759</a><br>redis 有序集合zset和集合set一样也是string类型元素的集合，且不允许重复的成员。不同的是 zset 的每个元素都会关联一个分数（分数可以重复），redis 通过分数来为集合中 的成员进行从小到大的排序。</p>
<p>每天每个司机使用一个zset的key存储，orderId作为zset的member，订单对应的预计完成时间戳作为zset的score;</p>
<p>当司机接一个订单时，就记录这个orderId，及订单对应的预计完成时间戳 （zadd）。</p>
<p>当订单取消、或完成时，就从这个zset中删除这个订单（zrem）。</p>
<p>查询时间段内的订单数，只需要把时间段的起止时间戳作为zset的score，使用zcount即可统计订单数</p>
<h5 id="10、怎么查看Java线程数量"><a href="#10、怎么查看Java线程数量" class="headerlink" title="10、怎么查看Java线程数量"></a>10、怎么查看Java线程数量</h5><p>ps -aux | grep java</p>
<h5 id="11、还知道哪些命令，jstack等"><a href="#11、还知道哪些命令，jstack等" class="headerlink" title="11、还知道哪些命令，jstack等"></a>11、还知道哪些命令，jstack等</h5><h5 id="12、cas优缺点，有什么问题"><a href="#12、cas优缺点，有什么问题" class="headerlink" title="12、cas优缺点，有什么问题"></a>12、cas优缺点，有什么问题</h5><p> 优点：CAS是乐观锁，且一直自旋等待锁，所以性能很高。<br> 缺点：CPU开销大；ABA问题；只能保证一个共享变量原子操作。</p>
<h5 id="13、锁你知道哪些"><a href="#13、锁你知道哪些" class="headerlink" title="13、锁你知道哪些"></a>13、锁你知道哪些</h5><h5 id="14、悲观锁乐观锁区别"><a href="#14、悲观锁乐观锁区别" class="headerlink" title="14、悲观锁乐观锁区别"></a>14、悲观锁乐观锁区别</h5><p>上锁<br>比较</p>
<h5 id="15、mysql索引，-where-a-and-b-and-c，分别设置a-b-c索引，最后怎么走的"><a href="#15、mysql索引，-where-a-and-b-and-c，分别设置a-b-c索引，最后怎么走的" class="headerlink" title="15、mysql索引， where a and b and c，分别设置a,b,c索引，最后怎么走的"></a>15、mysql索引， where a and b and c，分别设置a,b,c索引，最后怎么走的</h5><p>最左匹配原则</p>
<h5 id="16、dubbo怎么合理设置超时和重试"><a href="#16、dubbo怎么合理设置超时和重试" class="headerlink" title="16、dubbo怎么合理设置超时和重试"></a>16、dubbo怎么合理设置超时和重试</h5><p><strong>消费方 &gt; 提供方</strong></p>
<p> <strong>方法级优先，接口级次之，全局配置再次之</strong></p>
<p>timeout建议在服务端配置，cluster可以在客户端进行配置。</p>
<p>consumer方法级别 &gt; provider 方法级别 &gt; consumer 接口级别 &gt; provider 接口级别 &gt; consumer 全局级别 &gt; provider 全局级别。</p>
<p><strong>覆盖策略</strong></p>
<p>JVM -D 参数有先，xml次之，Properties最后<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/zmh458/article/details/122344908">https://blog.csdn.net/zmh458/article/details/122344908</a><br>（1）服务提供者端设置超时时间，在 Dubbo 的用户文档中，推荐如果能在服务 端多配置就尽量多配置，因为服务提供者比消费者更清楚自己提供的服务特 性。</p>
<p>（2）服务消费者端设置超时时间，如果在消费者端设置了超时时间，以消费者端 为主，即优先级更高。因为服务调用方设置超时时间控制性更灵活。如果消 费方超时，服务端线程不会定制，会产生警告。</p>
<p>1.对于核心的服务中心，去除dubbo超时重试机制，并重新评估设置超时时间。</p>
<p>2.业务处理代码必须放在服务端，客户端只做参数验证和服务调用，不涉及业务流程处理<br>注解和xml配置两种方式</p>
<h5 id="17、dubbo的rpc的网络通道是多个方法复用的吗？复用有什么优缺点"><a href="#17、dubbo的rpc的网络通道是多个方法复用的吗？复用有什么优缺点" class="headerlink" title="17、dubbo的rpc的网络通道是多个方法复用的吗？复用有什么优缺点"></a>17、dubbo的rpc的网络通道是多个方法复用的吗？复用有什么优缺点</h5><p>是多路复用的,这种方式的优势是开销小，不用为每个请求创建一个线程，可以节省系统开销。</p>
<h5 id="18-dubbo-通信协议-dubbo-协议为什么采用异步单一长连接"><a href="#18-dubbo-通信协议-dubbo-协议为什么采用异步单一长连接" class="headerlink" title="18.dubbo 通信协议 dubbo 协议为什么采用异步单一长连接"></a><strong>18.dubbo 通信协议 dubbo 协议为什么采用异步单一长连接</strong></h5><p>因为服务的现状大都是服务提供者少，通常只有几台机器， 而服务的消费者多，可能整个网站都在访问该服务， 比如 Morgan 的提供者只有 6 台提供者，却有上百台消费者，每天有 1.5 亿次调用， 如果采用常规的 hessian 服务，服务提供者很容易就被压跨， 通过单一连接，保证单一消费者不会压死提供者， 长连接，减少连接握手验证等， 并使用异步 IO，复用线程池，防止 C10K 问题</p>
<h5 id="JVM-调优工具"><a href="#JVM-调优工具" class="headerlink" title="JVM 调优工具"></a>JVM 调优工具</h5><p>1、jstack pid    </p>
<p>重点关注 deadLock死锁 Blocked 阻塞</p>
<p>2、jstat -gcutil</p>
<p>3、jmap - heap pid 查看进程堆内存情况，包括使用的GC算法，堆配置参数和各代中堆内存使用情况</p>
<h5 id="JVM性能调优及JVM具体调优参数"><a href="#JVM性能调优及JVM具体调优参数" class="headerlink" title="JVM性能调优及JVM具体调优参数"></a>JVM性能调优及JVM具体调优参数</h5><p>设定堆内存大小<br> -Xmx:堆内存最大限制。<br> 设定新生代大小。 新生代不宜太小，否则会有大量对象涌入老年代 -XX:NewSize:新生代大小<br> -XX:NewRatio 新生代和老生代占比 -XX:SurvivorRatio:伊甸园空间和幸存者空间的占比<br> Xss:栈大小<br> 设定垃圾回收器 年轻代用 -XX:+UseParNewGC 年老代用-XX:+UseConcMarkSweepGC</p>

                <hr>
                

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2022/11/04/创建型模式-工厂-原型-建造者-创建者/" data-toggle="tooltip" data-placement="top"
                           title="创建型模式-工厂|原型|建造者|创建者">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2022/11/03/dubbo面试/" data-toggle="tooltip" data-placement="top"
                           title="dubbo面试">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                

                


                <!--加入新的评论系统-->
                
                <!-- 来必力City版安装代码 -->
                <div id="lv-container" data-id="city" data-uid="MTAyMC81NjQ5NC8zMjk1Nw">
                    <script type="text/javascript">
                        (function(d, s) {
                            var j, e = d.getElementsByTagName(s)[0];

                            if (typeof LivereTower === 'function') { return; }

                            j = d.createElement(s);
                            j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                            j.async = true;

                            e.parentNode.insertBefore(j, e);
                        })(document, 'script');
                    </script>
                    <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
                </div>
                <!-- City版安装代码已完成 -->
                

                

            </div>

            <div class="hidden-xs col-sm-3 toc-col">
                <div class="toc-wrap">
                    <ol class="toc"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%AF%B4%E4%B8%80%E4%B8%8B%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E6%98%AF%E4%BB%80%E4%B9%88%E3%80%82"><span class="toc-text">1.说一下技术架构是什么。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%89%9B%E7%9B%BE%E7%BD%91%E5%85%B3%E6%98%AF%E6%80%8E%E4%B9%88%E8%B7%AF%E7%94%B1%E7%9A%84%E3%80%82"><span class="toc-text">2.牛盾网关是怎么路由的。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-dubbo%E7%9B%B4%E8%BF%9E%E5%92%8C%E6%B3%A8%E5%85%A5api%EF%BC%8C2%E7%A7%8D%E6%96%B9%E5%BC%8F%E4%BC%98%E5%8A%A3%E3%80%82"><span class="toc-text">3.dubbo直连和注入api，2种方式优劣。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-dubbo%E6%80%8E%E4%B9%88%E6%84%9F%E7%9F%A5%E6%9C%8D%E5%8A%A1%E4%B8%8D%E5%9C%A8%E3%80%82"><span class="toc-text">4.dubbo怎么感知服务不在。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-dubbo-provider-%E5%92%8C-zk-%E5%8F%AF%E4%BB%A5%E8%BF%9E%E6%8E%A5%EF%BC%8C-%E4%BD%86%E6%98%AFconsumer%E5%92%8Cprovider%E5%A4%B1%E8%B4%A5%E4%BA%86%EF%BC%8Cdubbo%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86%E7%9A%84%E3%80%82"><span class="toc-text">5.dubbo provider 和 zk 可以连接， 但是consumer和provider失败了，dubbo怎么处理的。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E8%AF%B4%E4%B8%80%E4%B8%8Bmq%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E8%BF%90%E7%94%A8%E3%80%82"><span class="toc-text">6.说一下mq在项目中的运用。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8mq%E6%8E%A8%E9%80%81%E5%BA%95%E5%9B%BE%E8%80%8C%E4%B8%8D%E7%94%A8http%E3%80%82%E5%A5%BD%E5%A4%84%E6%98%AF%E4%BB%80%E4%B9%88%E3%80%82"><span class="toc-text">7.为什么要用mq推送底图而不用http。好处是什么。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-mq%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E3%80%82"><span class="toc-text">8.mq使用场景。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-kaflka%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E6%8C%89%E9%A1%BA%E5%BA%8F%E6%8E%A8%E9%80%81%E3%80%82"><span class="toc-text">9.kaflka怎么保证消息按顺序推送。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E7%A8%B3%E5%AE%9A%E6%80%A7%E5%BB%BA%E8%AE%BE%E5%8F%82%E4%B8%8E%E4%BA%86%E4%BB%80%E4%B9%88%E3%80%82"><span class="toc-text">10.项目的稳定性建设参与了什么。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-%E8%AF%B4%E4%B8%80%E4%B8%8B%E5%BA%95%E5%9B%BE%E6%B2%BB%E7%90%86%E6%B5%81%E7%A8%8B%E3%80%82"><span class="toc-text">11.说一下底图治理流程。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#12-%E9%81%87%E5%88%B0FULL-GC%E4%BA%86%E6%80%8E%E4%B9%88%E6%8E%92%E6%9F%A5%EF%BC%8C%E5%88%A9%E7%94%A8%E6%BB%B4%E6%BB%B4%E7%9A%84%E7%94%9F%E6%80%81%E3%80%82"><span class="toc-text">12.遇到FULL GC了怎么排查，利用滴滴的生态。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#13-%E6%9C%89%E9%85%8D%E7%BD%AE%E8%BF%87jvm%E5%8F%82%E6%95%B0%E4%B9%88%EF%BC%8C%E6%80%8E%E4%B9%88%E9%85%8D%E7%BD%AE%E7%9A%84%E3%80%82"><span class="toc-text">13.有配置过jvm参数么，怎么配置的。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-%E9%81%87%E5%88%B0%E4%B8%9A%E5%8A%A1%E6%96%B9%E8%B0%83%E7%94%A8%E4%BD%A0%E6%9C%8D%E5%8A%A1%EF%BC%8C%E4%BD%A0%E6%AF%94%E4%B9%8B%E5%89%8D%E6%85%A2%E4%BA%8610%E5%80%8D%EF%BC%8C%E6%80%8E%E4%B9%88%E6%8E%92%E6%9F%A5%EF%BC%8C%E5%88%A9%E7%94%A8%E6%BB%B4%E6%BB%B4%E7%94%9F%E6%80%81%E3%80%82"><span class="toc-text">14.遇到业务方调用你服务，你比之前慢了10倍，怎么排查，利用滴滴生态。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#15-%E9%81%87%E5%88%B0%E4%BB%80%E4%B9%88bug%E4%BA%86%EF%BC%8C%E6%80%8E%E4%B9%88%E6%8E%92%E6%9F%A5%E7%9A%84%E3%80%82"><span class="toc-text">15.遇到什么bug了，怎么排查的。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#16-%E5%9B%BD%E9%99%85%E5%8C%96%E4%BA%BA%E8%84%B8%E7%9A%84mongdb%E5%88%86%E7%89%87%E8%BF%99%E4%BA%9B%E6%80%8E%E4%B9%88%E5%81%9A%E7%9A%84%E3%80%82"><span class="toc-text">16.国际化人脸的mongdb分片这些怎么做的。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E8%A7%84%E5%85%AB%E8%82%A1%EF%BC%9A"><span class="toc-text">常规八股：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%8F%82%E6%95%B0%EF%BC%8C%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E8%BF%87%E7%A8%8B"><span class="toc-text">1、线程池参数，创建和销毁过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81gc%E8%BF%87%E7%A8%8B"><span class="toc-text">2、gc过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81linux-%E6%9F%A5%E7%9C%8Bjava%E8%BF%9B%E7%A8%8B-cpu"><span class="toc-text">3、linux 查看java进程 cpu</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81awk"><span class="toc-text">4、awk</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5%E3%80%81rpc"><span class="toc-text">5、rpc</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6%E3%80%81spring%E5%8D%95%E4%BE%8B%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-text">6、spring单例处理方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7%E3%80%81Kafka-%E5%88%86%E7%89%87%E8%AE%BE%E7%BD%AE"><span class="toc-text">7、Kafka 分片设置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7%E3%80%81Kafka%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1"><span class="toc-text">7、Kafka保证消息不丢失</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8%E3%80%81redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-text">8、redis数据结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9%E3%80%81%E6%80%8E%E4%B9%88%E7%94%A8zset-%E6%9C%89%E5%BA%8F%E6%A0%91-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E5%9C%BA%E6%99%AF%EF%BC%8C%E7%BB%9F%E8%AE%A1%E4%BB%BB%E6%84%8F%E6%97%B6%E9%97%B4%E6%AE%B5%E7%9A%84%E5%8F%B8%E6%9C%BA%E8%AE%A2%E5%8D%95%E9%87%8F"><span class="toc-text">9、怎么用zset(有序树) 实现一个场景，统计任意时间段的司机订单量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10%E3%80%81%E6%80%8E%E4%B9%88%E6%9F%A5%E7%9C%8BJava%E7%BA%BF%E7%A8%8B%E6%95%B0%E9%87%8F"><span class="toc-text">10、怎么查看Java线程数量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11%E3%80%81%E8%BF%98%E7%9F%A5%E9%81%93%E5%93%AA%E4%BA%9B%E5%91%BD%E4%BB%A4%EF%BC%8Cjstack%E7%AD%89"><span class="toc-text">11、还知道哪些命令，jstack等</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#12%E3%80%81cas%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%8C%E6%9C%89%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98"><span class="toc-text">12、cas优缺点，有什么问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#13%E3%80%81%E9%94%81%E4%BD%A0%E7%9F%A5%E9%81%93%E5%93%AA%E4%BA%9B"><span class="toc-text">13、锁你知道哪些</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14%E3%80%81%E6%82%B2%E8%A7%82%E9%94%81%E4%B9%90%E8%A7%82%E9%94%81%E5%8C%BA%E5%88%AB"><span class="toc-text">14、悲观锁乐观锁区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#15%E3%80%81mysql%E7%B4%A2%E5%BC%95%EF%BC%8C-where-a-and-b-and-c%EF%BC%8C%E5%88%86%E5%88%AB%E8%AE%BE%E7%BD%AEa-b-c%E7%B4%A2%E5%BC%95%EF%BC%8C%E6%9C%80%E5%90%8E%E6%80%8E%E4%B9%88%E8%B5%B0%E7%9A%84"><span class="toc-text">15、mysql索引， where a and b and c，分别设置a,b,c索引，最后怎么走的</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#16%E3%80%81dubbo%E6%80%8E%E4%B9%88%E5%90%88%E7%90%86%E8%AE%BE%E7%BD%AE%E8%B6%85%E6%97%B6%E5%92%8C%E9%87%8D%E8%AF%95"><span class="toc-text">16、dubbo怎么合理设置超时和重试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#17%E3%80%81dubbo%E7%9A%84rpc%E7%9A%84%E7%BD%91%E7%BB%9C%E9%80%9A%E9%81%93%E6%98%AF%E5%A4%9A%E4%B8%AA%E6%96%B9%E6%B3%95%E5%A4%8D%E7%94%A8%E7%9A%84%E5%90%97%EF%BC%9F%E5%A4%8D%E7%94%A8%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-text">17、dubbo的rpc的网络通道是多个方法复用的吗？复用有什么优缺点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#18-dubbo-%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE-dubbo-%E5%8D%8F%E8%AE%AE%E4%B8%BA%E4%BB%80%E4%B9%88%E9%87%87%E7%94%A8%E5%BC%82%E6%AD%A5%E5%8D%95%E4%B8%80%E9%95%BF%E8%BF%9E%E6%8E%A5"><span class="toc-text">18.dubbo 通信协议 dubbo 协议为什么采用异步单一长连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JVM-%E8%B0%83%E4%BC%98%E5%B7%A5%E5%85%B7"><span class="toc-text">JVM 调优工具</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JVM%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E5%8F%8AJVM%E5%85%B7%E4%BD%93%E8%B0%83%E4%BC%98%E5%8F%82%E6%95%B0"><span class="toc-text">JVM性能调优及JVM具体调优参数</span></a></li></ol>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                

                <!-- Friends Blog -->
                
            </div>
        </div>

    </div>
</article>







<!-- Footer -->
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <br>
                <ul class="list-inline text-center">
                
                
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/桐原ah">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/Ru6ywang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Ruby 2023
                    <br>
                    <span id="busuanzi_container_site_pv" style="font-size: 12px;">PV: <span id="busuanzi_value_site_pv"></span> Times</span>
                    <br>
                    Theme by <a target="_blank" rel="noopener" href="https://haojen.github.io/">Haojen Ma</a>
                </p>

            </div>
        </div>
    </div>
    

</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/blog.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://Ru6ywang.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>



<!-- Google Analytics -->



<!-- Baidu Tongji -->


<!-- swiftype -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','','2.0.0');
</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!--wechat title img-->
<img class="wechat-title-img" src="https://ruby-1307023850.cos.ap-chengdu.myqcloud.com/avatar.JPG">
</body>

</html>
